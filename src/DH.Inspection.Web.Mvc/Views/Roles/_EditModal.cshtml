@using DH.Inspection.Web.Models.Roles
@using DH.Inspection.Web.Models.Common.Modals
@model EditRoleModalViewModel
@{ Layout = null; }
@await Html.PartialAsync("~/Views/Shared/Modals/_ModalHeader.cshtml", new ModalHeaderViewModel(L("EditRole")))
<style>
    .inputroles {
        max-width: 100%;
        padding-right: 0
    }
    .required {
        display:block;
    }
    .permission {
        display: block
    }
</style>
<form name="RoleEditForm" role="form" class="form-horizontal">
    <input type="hidden" name="Id" value="@Model.Role.Id" />
    <input type="hidden" name="IsStatic" value="@(Model.Role.IsStatic.ToString())" />
    <div class="modal-body">
        <div class="form-group row required">
            <label class="col-md-3 col-form-label" for="rolename">@L("RoleName")</label>
            <div class="col-md-9 inputroles">
                <input id="rolename" class="form-control" type="text" name="Name" value="@Model.Role.Name" @(Model.Role.IsStatic ? "disabled" : "") required maxlength="32" minlength="2">
            </div>
        </div>
        <div class="form-group row required">
            <label class="col-md-3 col-form-label" for="displayname">@L("DisplayName")</label>
            <div class="col-md-9 inputroles">
                <input id="displayname" type="text" class="form-control" name="DisplayName" value="@Model.Role.DisplayName" required maxlength="32" minlength="2">
            </div>
        </div>
        <div class="form-group row required">
            <label class="col-md-3 col-form-label" for="role-description">@L("RoleDescription")</label>
            <div class="col-md-9 inputroles">
                <textarea id="role-description" class="form-control" name="Description">@Model.Role.Description</textarea>
            </div>
        </div>
        @*<div class="form-group row">
                <label class="col-md-3 col-form-label">@L("Permissions")</label>
                <div class="col-md-9">
                    <div class="row">
                        @foreach (var permission in Model.Permissions)
                        {
                            <div class="col-md-6">
                                <input type="checkbox" name="permission" value="@permission.Name" id="@($"permission{permission.Name}")" @(Model.HasPermission(permission) ? "checked" : "") @(Model.Role.IsStatic ? "disabled" : "") />
                                <label for="@($"permission{permission.Name}")">@permission.DisplayName</label>
                            </div>}
                    </div>
                </div>
            </div>*@
        <div class="form-group row permission">
            <label class="col-md-3 col-form-label">@L("Permissions")</label>
            <div>
                @foreach (var permission in Model.PermissionsTree)
                {
                    <div style="border: 1px solid #ced4da;
        margin-bottom: 3px;
        padding: .375rem .75rem;
        margin-left: 7.5px;
        border-radius: .25rem;
    ">
                        <label class="checkbox-inline">

                            <input type="checkbox" name="permission" value="@permission.Name" id="@($"permission{permission.Name}")" @(Model.HasPermission(permission) ? "checked" : "") @(Model.Role.IsStatic ? "disabled" : "") />
                            <label for="@($"permission{permission.Name}")">@permission.DisplayName</label>
                        </label>
                        <div>
                            @if (permission.Children != null)
                            {
                                foreach (var permissionChildren in permission.Children)
                                {
                                    <label class="checkbox-inline" >
                                        <input type="checkbox" style="padding-top:2px;" name="permission" value="@permissionChildren.Name" id="@($"permission{permissionChildren.Name}")" @(Model.HasPermission(permissionChildren) ? "checked" : "") @(Model.Role.IsStatic ? "disabled" : "") />
                                        <label style="        font-size: 13px;
        color: #666;
        margin-bottom: 0.2rem;
" for="@($"permission{permissionChildren.Name}")">@permissionChildren.DisplayName</label>
                                    </label>
                                }
                            }
                        </div>
                    </div>

                }
            </div>
            @*<div>
                    <label for="name">内联的复选框和单选按钮的实例</label>
                    <label class="checkbox-inline">
                        <input type="checkbox" id="inlineCheckbox1" value="option1"> 选项 1
                    </label>
                    <label class="checkbox-inline">
                        <input type="checkbox" id="inlineCheckbox2" value="option2"> 选项 2
                    </label>
                    <label class="checkbox-inline">
                        <input type="checkbox" id="inlineCheckbox3" value="option3"> 选项 3
                    </label>
                </div>*@
        </div>
    </div>
    @await Html.PartialAsync("~/Views/Shared/Modals/_ModalFooterWithSaveAndCancel.cshtml")
</form>

<script src="~/view-resources/Views/Roles/_EditModal.js" asp-append-version="true"></script>
